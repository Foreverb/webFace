{"ast":null,"code":"import _classCallCheck from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\webFace\\\\src\\\\Components\\\\information.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n//用户信息栏\nimport React, { Component } from 'react';\nimport '../css/information.css';\nimport FileUpload from '../fileUpload';\nimport ChatClient from '../ChatClient';\n\nvar Information = /*#__PURE__*/function (_Component) {\n  _inherits(Information, _Component);\n\n  var _super = _createSuper(Information);\n\n  function Information(props) {\n    var _this;\n\n    _classCallCheck(this, Information);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      startNick: ''\n    };\n    return _this;\n  }\n\n  _createClass(Information, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          profile = _this$props.profile,\n          onclose = _this$props.onclose,\n          updateAvatar = _this$props.updateAvatar,\n          chatModePid = _this$props.chatModePid;\n      var nick = profile.nick,\n          ava = profile.ava,\n          id = profile.id;\n      var socket = ChatClient.socket;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"information\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"avaAndNick\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"avaWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        encType: \"multipart/form-data\",\n        id: \"avaApgrade\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"avaIpt\",\n        required: true,\n        name: \"thumbnail\",\n        onClick: function onClick(e) {\n          _this2.uploadFile(e.target, id, chatModePid, socket, profile, updateAvatar);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"img\", {\n        src: ava,\n        className: \"avater\",\n        alt: \"\",\n        onClick: function onClick() {\n          _this2.dispatchInputClick();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"nick\",\n        onClick: function onClick(e) {\n          _this2._startChange(e);\n        },\n        onKeyDown: function onKeyDown(e) {\n          e.keyCode === 13 && _this2._endChange(e);\n        },\n        onBlur: function onBlur(e) {\n          _this2.nickBlur(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }\n      }, nick)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"online\",\n        style: onclose ? {\n          backgroundColor: 'red'\n        } : {\n          backgroundColor: 'green'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 9\n        }\n      }));\n    } //点击头像，触发input事件\n\n  }, {\n    key: \"dispatchInputClick\",\n    value: function dispatchInputClick() {\n      var ava_upload = document.getElementById('avaIpt');\n      ava_upload.click();\n    } //上传头像\n\n  }, {\n    key: \"uploadFile\",\n    value: function uploadFile(This, id, chatModePid, socket, profile, updateAvatar) {\n      FileUpload.upgradeAva(This, id, chatModePid, socket, profile, updateAvatar);\n    } //编辑nick\n\n  }, {\n    key: \"_startChange\",\n    value: function _startChange(e) {\n      //记录初始值\n      this.setState({\n        startNick: e.target.innerText\n      });\n      e.target.setAttribute('contenteditable', true);\n      e.target.focus(); // e.target.innerText = '';\n    } //nick失焦\n\n  }, {\n    key: \"nickBlur\",\n    value: function nickBlur(e) {\n      if (!e.target.innerText) {\n        e.target.innerText = this.state.startNick;\n      }\n    }\n  }, {\n    key: \"_endChange\",\n    value: function _endChange(e) {\n      var onClick = this.props.onClick;\n      var inner = e.target.innerText;\n\n      if (inner.length > 7 || inner.length < 2) {\n        alert('请输入正确格式:输入内容长度必须为大于2小于8的有效字符');\n        e.target.innerText = '';\n        e.target.focus();\n        return;\n      }\n\n      e.target.setAttribute('contenteditable', false);\n      e.target.blur();\n      onClick && onClick(inner);\n    }\n  }]);\n\n  return Information;\n}(Component);\n\nexport default Information;","map":{"version":3,"sources":["D:/webFace/src/Components/information.js"],"names":["React","Component","FileUpload","ChatClient","Information","props","state","startNick","profile","onclose","updateAvatar","chatModePid","nick","ava","id","socket","e","uploadFile","target","dispatchInputClick","_startChange","keyCode","_endChange","nickBlur","backgroundColor","ava_upload","document","getElementById","click","This","upgradeAva","setState","innerText","setAttribute","focus","onClick","inner","length","alert","blur"],"mappings":"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","sourcesContent":["//用户信息栏\r\nimport React, { Component } from 'react';\r\nimport '../css/information.css';\r\nimport FileUpload from '../fileUpload';\r\nimport ChatClient from '../ChatClient';\r\nclass Information extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      startNick: ''\r\n    }\r\n  }\r\n  render() {\r\n    let { profile, onclose, updateAvatar, chatModePid } = this.props;\r\n    let { nick, ava, id } = profile;\r\n    let socket = ChatClient.socket;\r\n    return (\r\n      <div className='information'>\r\n        <div className=\"avaAndNick\">\r\n          {/* <img src='' className='loading' alt='' /> */}\r\n          <div className=\"avaWrap\">\r\n            <form encType=\"multipart/form-data\" id='avaApgrade'>\r\n              <input type='file' id=\"avaIpt\" required name=\"thumbnail\" onClick={(e) => { this.uploadFile(e.target, id, chatModePid, socket, profile, updateAvatar) }} />\r\n            </form>\r\n            <img src={ava} className='avater' alt='' onClick={()=>{this.dispatchInputClick()}}/>\r\n          </div>\r\n          <p className='nick' onClick={(e) => { this._startChange(e) }}\r\n            onKeyDown={(e) => { e.keyCode === 13 && this._endChange(e) }}\r\n            onBlur={(e)=>{this.nickBlur(e)}}>{nick}</p>\r\n        </div>\r\n\r\n        <div className='online' style={onclose ? { backgroundColor: 'red' } : { backgroundColor: 'green' }}></div>\r\n      </div>\r\n    )\r\n  }\r\n  //点击头像，触发input事件\r\n  dispatchInputClick(){\r\n    let ava_upload = document.getElementById('avaIpt');\r\n    ava_upload.click()\r\n  }\r\n  //上传头像\r\n  uploadFile(This, id, chatModePid, socket, profile, updateAvatar) {\r\n    FileUpload.upgradeAva(This, id, chatModePid, socket, profile, updateAvatar)\r\n  }\r\n  //编辑nick\r\n  _startChange(e) {\r\n    //记录初始值\r\n    this.setState({startNick: e.target.innerText})\r\n    e.target.setAttribute('contenteditable', true);\r\n    e.target.focus();\r\n    // e.target.innerText = '';\r\n  }\r\n  //nick失焦\r\n  nickBlur(e){\r\n    if( !e.target.innerText ) {\r\n      e.target.innerText = this.state.startNick\r\n    }\r\n  }\r\n  _endChange(e) {\r\n    let { onClick } = this.props;\r\n    let inner = e.target.innerText;\r\n    if (inner.length > 7 || inner.length < 2) {\r\n      alert('请输入正确格式:输入内容长度必须为大于2小于8的有效字符');\r\n      e.target.innerText = '';\r\n      e.target.focus();\r\n      return\r\n    }\r\n    e.target.setAttribute('contenteditable', false);\r\n    e.target.blur();\r\n    onClick && onClick(inner);\r\n  }\r\n}\r\nexport default Information;\r\n"]},"metadata":{},"sourceType":"module"}