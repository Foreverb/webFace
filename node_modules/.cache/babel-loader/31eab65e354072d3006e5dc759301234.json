{"ast":null,"code":"import _classCallCheck from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\webFace\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\webFace\\\\src\\\\Components\\\\information.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n//用户信息栏\nimport React, { Component } from 'react';\nimport '../css/information.css';\nimport FileUpload from '../fileUpload';\nimport ChatClient from '../ChatClient';\n\nvar Information = /*#__PURE__*/function (_Component) {\n  _inherits(Information, _Component);\n\n  var _super = _createSuper(Information);\n\n  function Information(props) {\n    _classCallCheck(this, Information);\n\n    return _super.call(this, props);\n  }\n\n  _createClass(Information, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          profile = _this$props.profile,\n          onclose = _this$props.onclose,\n          updateAvatar = _this$props.updateAvatar,\n          chatModePid = _this$props.chatModePid;\n      var nick = profile.nick,\n          ava = profile.ava,\n          id = profile.id;\n      var socket = ChatClient.socket;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"information\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"\",\n        className: \"loading\",\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'inlineBlock'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        encType: \"multipart/form-data\",\n        id: \"avaApgrade\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        required: true,\n        name: \"thumbnail\",\n        onClick: function onClick(e) {\n          _this.uploadFile(e.target, id, chatModePid, socket, profile, updateAvatar);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"img\", {\n        src: ava,\n        className: \"avater\",\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"nick\",\n        onClick: function onClick(e) {\n          _this._startChange(e);\n        },\n        onKeyDown: function onKeyDown(e) {\n          e.keyCode === 13 && _this._endChange(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 9\n        }\n      }, nick), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"online\",\n        style: onclose ? {\n          backgroundColor: 'red'\n        } : {\n          backgroundColor: 'green'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 9\n        }\n      }));\n    }\n  }, {\n    key: \"uploadFile\",\n    value: function uploadFile(This, id, chatModePid, socket, profile, updateAvatar) {\n      FileUpload.upgradeAva(This, id, chatModePid, socket, profile, updateAvatar);\n    }\n  }, {\n    key: \"_startChange\",\n    value: function _startChange(e) {\n      e.target.setAttribute('contenteditable', true);\n      e.target.focus();\n      e.target.innerText = '';\n    }\n  }, {\n    key: \"_endChange\",\n    value: function _endChange(e) {\n      var onClick = this.props.onClick;\n      var inner = e.target.innerText;\n\n      if (inner.length > 7 || inner.length < 2) {\n        alert('请输入正确格式:输入内容长度必须为大于2小于8的有效字符');\n        e.target.innerText = '';\n        e.target.focus();\n        return;\n      }\n\n      e.target.setAttribute('contenteditable', false);\n      e.target.blur();\n      onClick && onClick(inner);\n    }\n  }]);\n\n  return Information;\n}(Component);\n\nexport default Information;","map":{"version":3,"sources":["D:/webFace/src/Components/information.js"],"names":["React","Component","FileUpload","ChatClient","Information","props","profile","onclose","updateAvatar","chatModePid","nick","ava","id","socket","display","e","uploadFile","target","_startChange","keyCode","_endChange","backgroundColor","This","upgradeAva","setAttribute","focus","innerText","onClick","inner","length","alert","blur"],"mappings":"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","sourcesContent":["//用户信息栏\r\nimport React, { Component } from 'react';\r\nimport '../css/information.css';\r\nimport FileUpload from '../fileUpload';\r\nimport ChatClient from '../ChatClient';\r\nclass Information extends Component{\r\n  constructor(props){\r\n    super(props);\r\n  }\r\n  render(){\r\n    let {profile,onclose,updateAvatar,chatModePid} = this.props;\r\n    let {nick,ava,id} = profile;\r\n    let socket = ChatClient.socket;\r\n    return(\r\n      <div className='information'>\r\n        <img src='' className='loading' alt=''/>\r\n        <div style={{display:'inlineBlock'}}>\r\n          <form encType=\"multipart/form-data\" id='avaApgrade'>\r\n            <input type='file' required name=\"thumbnail\" onClick={(e)=>{this.uploadFile(e.target,id,chatModePid,socket,profile,updateAvatar)}}/>\r\n          </form>\r\n          <img src={ava} className='avater' alt=''/>\r\n        </div>\r\n        <p className='nick' onClick={(e)=>{this._startChange(e)}}\r\n        onKeyDown={(e)=>{e.keyCode === 13 && this._endChange(e)}}>{nick}</p>\r\n        <span className='online' style={onclose ? {backgroundColor:'red'} : {backgroundColor:'green'}}></span>\r\n      </div>\r\n    )\r\n  }\r\n  uploadFile(This,id,chatModePid,socket,profile,updateAvatar){\r\n    FileUpload.upgradeAva(This,id,chatModePid,socket,profile,updateAvatar)\r\n  }\r\n  _startChange(e){\r\n    e.target.setAttribute('contenteditable',true);\r\n    e.target.focus();\r\n    e.target.innerText = '';\r\n  }\r\n  _endChange(e){\r\n    let {onClick} = this.props;\r\n    let inner = e.target.innerText;\r\n    if( inner.length > 7 || inner.length < 2 ){\r\n      alert('请输入正确格式:输入内容长度必须为大于2小于8的有效字符');\r\n      e.target.innerText = '';\r\n      e.target.focus();\r\n      return\r\n    }\r\n    e.target.setAttribute('contenteditable',false);\r\n    e.target.blur();\r\n    onClick && onClick(inner);\r\n  }\r\n}\r\nexport default Information;\r\n"]},"metadata":{},"sourceType":"module"}